
## Noções Básicas sobre Switches

Agora que você sabe tudo sobre endereços MAC Ethernet, é hora de falar sobre como um switch usa esses endereços para encaminhar (ou descartar) quadros para outros dispositivos em uma rede. Se um switch apenas encaminhasse cada quadro recebido de todas as portas, sua rede ficaria tão congestionada que provavelmente chegaria a uma parada completa.

Um switch Ethernet da camada 2 usa endereços MAC da camada 2 para tomar decisões de encaminhamento. Desconhece completamente os dados (protocolo) que estão sendo transportados na parte de dados do quadro, como um pacote IPv4, uma mensagem ARP ou um pacote ND IPv6. O switch toma suas decisões de encaminhamento com base apenas nos endereços MAC Ethernet da camada 2.

Um switch Ethernet examina sua tabela de endereços MAC para tomar uma decisão de encaminhamento para cada quadro, ao contrário dos hubs Ethernet herdados que repetem bits em todas as portas, exceto a porta de entrada. Na figura, o switch de quatro portas acaba de ser ligado. O switch toma decisões de encaminhamento com base apenas nos endereços MAC Ethernet da camada 2.

**Observação**: Os endereços MAC são encurtados neste tópico para fins de demonstração.

![[Pasted image 20240617223459.png]]

O switch cria a tabela de endereços MAC dinamicamente examinando o endereço MAC de origem dos quadros recebidos em uma porta.O switch encaminha os quadros procurando uma correspondência entre o endereço MAC de destino no quadro e uma entrada na tabela de endereços MAC.

**Examine o endereço MAC de origem**

Todo quadro que entra em um switch é verificado quanto ao aprendizado de novas informações. Isso é feito examinando o endereço MAC de origem do quadro e o número da porta em que o quadro entrou no comutador. Se o endereço MAC de origem não existe, é adicionado à tabela juntamente com o número da porta de entrada. Se o endereço MAC de origem existir, o switch atualizará o cronômetro de atualização para essa entrada na tabela. Por padrão, a maioria dos switches Ethernet mantém uma entrada na tabela por 5 minutos.

Na figura, por exemplo, o PC-A está enviando um quadro Ethernet para o PC-D. A tabela mostra que o switch adiciona o endereço MAC do PC-A à tabela de endereços MAC.

**Nota**: Se o endereço MAC de origem não existir na tabela, mas em uma porta diferente, o switch tratará isso como uma nova entrada. A entrada é substituída usando o mesmo endereço MAC, mas com o número de porta mais atual.

![[Pasted image 20240617223517.png]]

----

## Filtragem de Quadros

A medida que um switch recebe quadros de dispositivos diferentes, ele é capaz de preencher sua tabela de endereços MAC examinando o endereço MAC de origem de cada quadro. Quando a tabela de endereços MAC do switch contém o endereço MAC de destino, ele pode filtrar o quadro e encaminhar uma única porta.


**PC-D --> Switch** 

Na figura, PC-D está respondendo ao PC-A. O switch vê o endereço MAC do PC-D no quadro de entrada na porta 4. Em seguida, o switch coloca o endereço MAC do PC-D na Tabela de Endereços MAC associada à porta 4.

![[Pasted image 20240617223645.png]]

**Mudar pra PC-A**

Em seguida, como o switch possui o endereço MAC de destino para PC-A na tabela de endereços MAC, ele enviará o quadro apenas para a porta 1, conforme mostrado na figura.

![[Pasted image 20240617223632.png]]

**PC-A --> PC-D**

Em seguida, PC-A envia outro quadro para PC-D como mostrado na figura. A tabela de endereços MAC já contém o endereço MAC para PC-A; portanto, o cronômetro de atualização de cinco minutos para essa entrada é redefinido. Em seguida, como a tabela de switches contém o endereço MAC de destino para PC-D, ela envia o quadro apenas para a porta 4.

![[Pasted image 20240617223717.png]]